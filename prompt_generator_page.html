<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sci-Illustrator Prompt Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .custom-shadow { shadow-sm hover:shadow-md transition-shadow duration-300; }
        pre { white-space: pre-wrap; word-wrap: break-word; }
        .chip-active { background-color: #2563eb; color: white; border-color: #2563eb; }
        .chip-inactive { background-color: white; color: #475569; border-color: #e2e8f0; }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 antialiased">

    <div class="min-h-screen p-4 md:p-8">
        <!-- Header -->
        <header class="max-w-6xl mx-auto mb-8 flex flex-col md:flex-row justify-between items-start md:items-end gap-4">
            <div>
                <h1 class="text-3xl font-extrabold text-slate-900 tracking-tight flex items-center gap-2">
                    <span>ðŸ”¬</span> Sci-Illustrator Prompt Gen
                </h1>
                <p class="text-slate-500 mt-1 font-medium italic">Advanced structured prompt tool for high-impact scientific visualization</p>
            </div>
            <button type="button" onclick="generatePrompt()" class="bg-blue-600 hover:bg-blue-700 text-white px-8 py-3 rounded-xl font-bold transition-all shadow-lg flex items-center gap-2 transform active:scale-95">
                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="m13 2-2 10h10L11 22l2-10H3l10-10z"/></svg>
                Generate Prompt
            </button>
        </header>

        <main class="max-w-6xl mx-auto grid grid-cols-1 lg:grid-cols-12 gap-8">
            <!-- Left: Form -->
            <div class="lg:col-span-8 space-y-6">
                
                <!-- Section 1: Scientific Context -->
                <div class="bg-white border border-slate-200 rounded-2xl p-6 shadow-sm">
                    <div class="flex items-center gap-2 mb-4 pb-2 border-b border-slate-100">
                        <svg class="text-blue-600" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4.5 3h15"/><path d="M6 3v16a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3"/><path d="M6 14h12"/></svg>
                        <h2 class="text-lg font-bold text-slate-800">1. Scientific Context</h2>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div class="col-span-1 md:col-span-2">
                            <label class="block text-xs font-bold mb-1 uppercase tracking-wider text-slate-500">Research Domain</label>
                            <input id="domain" type="text" value="Oxygen Evolution Reaction (OER) Mechanism on IrO2 Catalyst" class="w-full p-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all">
                        </div>
                        <div>
                            <label class="block text-xs font-bold mb-1 uppercase tracking-wider text-slate-500">Research Level</label>
                            <select id="level" class="w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none">
                                <option>System-level</option>
                                <option>Component-level</option>
                                <option>Microstructural-level</option>
                                <option selected>Molecular-level</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-xs font-bold mb-1 uppercase tracking-wider text-slate-500">Research Goal</label>
                            <input id="goal" type="text" value="Visualizing the 4-step proton-coupled electron transfer process on active sites" class="w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none">
                        </div>
                    </div>
                </div>

                <!-- Section 2: Illustration Objective -->
                <div class="bg-white border border-slate-200 rounded-2xl p-6 shadow-sm">
                    <div class="flex items-center gap-2 mb-4 pb-2 border-b border-slate-100">
                        <svg class="text-blue-600" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></svg>
                        <h2 class="text-lg font-bold text-slate-800">2. Illustration Objective</h2>
                    </div>
                    <div>
                        <label class="block text-xs font-bold mb-2 uppercase tracking-wider text-slate-500">Usage & Target (Multi-select)</label>
                        <div id="purpose-container" class="flex flex-wrap gap-2">
                            <!-- Chips injected via JS -->
                        </div>
                        <div class="mt-4">
                            <label class="block text-xs font-bold mb-1 uppercase tracking-wider text-slate-500">Core Scientific Information</label>
                            <textarea id="coreInfo" rows="2" class="w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none">1. Adsorption of H2O; 2. Formation of *O and *OOH intermediates; 3. O2 bubble nucleation and release</textarea>
                        </div>
                    </div>
                </div>

                <!-- Section 3: Structural Layout -->
                <div class="bg-white border border-slate-200 rounded-2xl p-6 shadow-sm">
                    <div class="flex items-center gap-2 mb-4 pb-2 border-b border-slate-100">
                        <svg class="text-blue-600" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="9" y1="21" x2="9" y2="9"/></svg>
                        <h2 class="text-lg font-bold text-slate-800">3. Structural Layout</h2>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs font-bold mb-1 uppercase tracking-wider text-slate-500">Viewpoint</label>
                            <select id="view" class="w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none">
                                <option>2D top-view</option>
                                <option selected>2D side-view</option>
                                <option>Cross-sectional view</option>
                                <option>Exploded view</option>
                                <option>Isometric cutaway</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-xs font-bold mb-1 uppercase tracking-wider text-slate-500">Hierarchy & Relationship</label>
                            <input id="hierarchy" type="text" value="IrO2 catalyst surface at bottom, water electrolyte at top interface" class="w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none">
                        </div>
                    </div>
                </div>

                <!-- Section 4: Physical Phenomena -->
                <div class="bg-white border border-slate-200 rounded-2xl p-6 shadow-sm">
                    <div class="flex items-center gap-2 mb-4 pb-2 border-b border-slate-100">
                        <svg class="text-blue-600" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"/></svg>
                        <h2 class="text-lg font-bold text-slate-800">4. Physical Phenomena</h2>
                    </div>
                    <div id="phenomena-groups" class="space-y-4">
                        <!-- Groups injected via JS -->
                    </div>
                </div>

                <!-- Section 5: Material & Texture -->
                <div class="bg-white border border-slate-200 rounded-2xl p-6 shadow-sm">
                    <div class="flex items-center gap-2 mb-4 pb-2 border-b border-slate-100">
                        <svg class="text-blue-600" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="2" width="20" height="8" rx="2" ry="2"/><rect x="2" y="14" width="20" height="8" rx="2" ry="2"/><line x1="6" y1="6" x2="6.01" y2="6"/><line x1="6" y1="18" x2="6.01" y2="18"/></svg>
                        <h2 class="text-lg font-bold text-slate-800">5. Material & Texture</h2>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div>
                            <label class="block text-xs font-bold mb-1 uppercase tracking-wider text-slate-500">Catalyst Surface</label>
                            <input id="matCatalyst" type="text" value="IrO2 nanocrystals (dark blue-gray with sharp crystalline facets)" class="w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none">
                        </div>
                        <div>
                            <label class="block text-xs font-bold mb-1 uppercase tracking-wider text-slate-500">Electrolyte/Interface</label>
                            <input id="matMembrane" type="text" value="Aqueous electrolyte (transparent light blue background)" class="w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none">
                        </div>
                        
                        <!-- Dynamic Phenomena Styling Area -->
                        <div id="dynamic-styling-container" class="col-span-2 mt-4 pt-4 border-t border-slate-100 hidden">
                            <h3 class="text-xs font-bold mb-3 uppercase tracking-widest text-blue-600 flex items-center gap-2">
                                <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="m13 2-2 10h10L11 22l2-10H3l10-10z"/></svg>
                                Phenomena Visual Styling
                            </h3>
                            <div id="dynamic-inputs" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <!-- Inputs injected via JS -->
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Section 6: Annotation Standards -->
                <div class="bg-white border border-slate-200 rounded-2xl p-6 shadow-sm">
                    <div class="flex items-center gap-2 mb-4 pb-2 border-b border-slate-100">
                        <svg class="text-blue-600" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="m12 19 7-7 3 3-7 7-3-3z"/><path d="m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/><path d="m2 2 20 20"/></svg>
                        <h2 class="text-lg font-bold text-slate-800">6. Annotation Standards</h2>
                    </div>
                    <div>
                        <label class="block text-xs font-bold mb-1 uppercase tracking-wider text-slate-500">Mandatory Labels (Comma separated)</label>
                        <input id="labels" type="text" value="IrO2 Catalyst, H2O, O2, *OH, *OOH, e-, H+" class="w-full p-3 bg-slate-50 border border-slate-200 rounded-xl outline-none">
                    </div>
                </div>

                <!-- Bottom Footer Generate Button -->
                <div class="flex flex-col items-center justify-center pt-8 pb-20 space-y-4 text-center">
                    <p class="italic text-slate-400 text-sm px-4 tracking-tight">Expert reasoning logic for OER mechanism research is automatically applied.</p>
                    <button type="button" onclick="generatePrompt()" class="w-full md:w-80 py-5 bg-blue-600 hover:bg-blue-700 text-white text-xl font-bold rounded-2xl shadow-2xl transition-all transform active:scale-95 animate-pulse hover:animate-none">
                        Generate Final Prompt
                    </button>
                </div>
            </div>

            <!-- Right: Output -->
            <div class="lg:col-span-4 lg:sticky lg:top-8 self-start">
                <div class="bg-slate-900 text-slate-100 rounded-3xl shadow-2xl overflow-hidden flex flex-col h-[85vh]">
                    <div class="px-6 py-5 border-b border-slate-800 flex justify-between items-center bg-slate-800/50">
                        <h3 class="font-bold flex items-center gap-2 tracking-tight">
                            <svg class="text-blue-400" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"/><line x1="3" y1="9" x2="21" y2="9"/><line x1="9" y1="21" x2="9" y2="9"/></svg>
                            Prompt Output
                        </h3>
                        <button id="copy-btn" type="button" onclick="copyToClipboard()" disabled class="text-xs bg-slate-700 hover:bg-slate-600 disabled:opacity-30 disabled:cursor-not-allowed px-4 py-2 rounded-lg flex items-center gap-2 transition-all border border-slate-600 shadow-inner">
                            <svg id="copy-icon" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>
                            <span id="copy-text">Copy Prompt</span>
                        </button>
                    </div>
                    
                    <div id="prompt-display-container" class="flex-1 p-6 overflow-y-auto font-mono text-sm leading-relaxed scrollbar-hide bg-slate-900/50">
                        <div id="empty-state" class="flex flex-col items-center justify-center h-full text-slate-500 text-center space-y-6 px-4">
                            <div class="w-20 h-20 rounded-full bg-slate-800/80 flex items-center justify-center shadow-inner">
                                <svg class="opacity-20 text-blue-400" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="m13 2-2 10h10L11 22l2-10H3l10-10z"/></svg>
                            </div>
                            <div>
                                <p class="font-bold text-slate-400 text-base">Ready to Generate</p>
                                <p class="text-xs mt-2 opacity-50 italic">Fill in the specification and click "Generate Prompt" to see the output.</p>
                            </div>
                        </div>
                        <pre id="prompt-text" class="hidden text-blue-100 selection:bg-blue-500/30"></pre>
                    </div>
                    
                    <div class="p-4 bg-slate-800/80 border-t border-slate-700">
                        <div class="flex items-center gap-2 text-xs text-slate-400 font-medium">
                            <svg class="text-green-500" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
                            <span>Nature Journal visual logic applied</span>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Notification system -->
    <div id="notification" class="fixed bottom-8 left-1/2 transform -translate-x-1/2 bg-slate-900 text-white px-6 py-3 rounded-2xl shadow-2xl opacity-0 transition-opacity pointer-events-none flex items-center gap-3 border border-slate-700">
        <svg class="text-green-500" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>
        <span id="notification-text">Prompt copied!</span>
    </div>

    <script>
        // --- State Management ---
        const state = {
            domain: 'Oxygen Evolution Reaction (OER) Mechanism on IrO2 Catalyst',
            level: 'Molecular-level',
            goal: 'Visualizing the 4-step proton-coupled electron transfer process on active sites',
            purpose: ['Mechanism Schematic', 'Illustration'],
            coreInfo: '1. Adsorption of H2O; 2. Formation of *O and *OOH intermediates; 3. O2 bubble nucleation and release',
            view: '2D side-view',
            hierarchy: 'IrO2 catalyst surface at bottom, water electrolyte at top interface',
            phenomena: ['Ions', 'Molecules', 'Radicals', 'Electron Flow'],
            phenomenaStyles: {
                'Ions': 'Glowing small cyan spheres for protons (H+)',
                'Molecules': 'Standard ball-and-stick models for H2O and O2 molecules',
                'Radicals': 'Highlighted surface-bound intermediate species (*OH, *O, *OOH)',
                'Electron Flow': 'Discrete yellow arrows originating from the catalyst to the circuit'
            },
            matCatalyst: 'IrO2 nanocrystals (dark blue-gray with sharp crystalline facets)',
            matMembrane: 'Aqueous electrolyte (transparent light blue background)',
            labels: 'IrO2 Catalyst, H2O, O2, *OH, *OOH, e-, H+'
        };

        const purposeOptions = ['Mechanism Schematic', 'Component Structure', 'Power Point', 'Illustration', 'Graphical Abstract', 'Journal Cover'];
        const phenomenaGroups = [
            { label: 'Flow & Transport', items: ['Gas Flow', 'Liquid Water', 'Proton Transport', 'Electron Flow', 'Energy Flow', 'Mass Transfer'] },
            { label: 'Fields & Gradients', items: ['Temperature Distribution', 'Current Density', 'Electric Field', 'Concentration Gradient'] },
            { label: 'Entities & Structures', items: ['Atoms', 'Molecules', 'Ions', 'Radicals', 'Unit Cells', 'Organelles', 'Nanoparticles'] }
        ];

        // --- Initialization ---
        window.onload = () => {
            renderPurposeChips();
            renderPhenomenaGroups();
            updateDynamicInputs();
        };

        // --- Render UI Components ---
        function renderPurposeChips() {
            const container = document.getElementById('purpose-container');
            container.innerHTML = purposeOptions.map(opt => `
                <button type="button" onclick="togglePurpose('${opt}')" 
                    class="chip px-4 py-2 rounded-full text-xs font-bold border transition-all ${state.purpose.includes(opt) ? 'chip-active shadow-md' : 'chip-inactive'}">
                    ${opt}
                </button>
            `).join('');
        }

        function renderPhenomenaGroups() {
            const container = document.getElementById('phenomena-groups');
            container.innerHTML = phenomenaGroups.map(group => `
                <div>
                    <label class="block text-[10px] font-bold mb-2 uppercase tracking-widest text-slate-400">${group.label}</label>
                    <div class="flex flex-wrap gap-2">
                        ${group.items.map(item => `
                            <button type="button" onclick="togglePhenomena('${item}')"
                                class="chip px-3 py-1.5 rounded-lg text-xs font-semibold border transition-all ${state.phenomena.includes(item) ? 'bg-blue-50 border-blue-200 text-blue-700 shadow-sm' : 'bg-white border-slate-200 text-slate-500'}">
                                ${item}
                            </button>
                        `).join('')}
                    </div>
                </div>
            `).join('');
        }

        function updateDynamicInputs() {
            const container = document.getElementById('dynamic-styling-container');
            const list = document.getElementById('dynamic-inputs');
            
            if (state.phenomena.length > 0) {
                container.classList.remove('hidden');
                list.innerHTML = state.phenomena.map(p => `
                    <div class="bg-blue-50/50 p-3 rounded-xl border border-blue-100 transition-all hover:border-blue-200">
                        <label class="block text-[10px] font-bold mb-1.5 uppercase tracking-wider text-blue-500 italic">Appearance of ${p}</label>
                        <input type="text" value="${state.phenomenaStyles[p] || ''}" oninput="updatePhenStyle('${p}', this.value)"
                            placeholder="e.g., Gold yellow color" 
                            class="w-full p-2 bg-white border border-blue-200 rounded-lg text-sm outline-none focus:ring-1 focus:ring-blue-400">
                    </div>
                `).join('');
            } else {
                container.classList.add('hidden');
            }
        }

        // --- Event Handlers ---
        function togglePurpose(opt) {
            if (state.purpose.includes(opt)) state.purpose = state.purpose.filter(i => i !== opt);
            else state.purpose.push(opt);
            renderPurposeChips();
        }

        function togglePhenomena(item) {
            if (state.phenomena.includes(item)) state.phenomena = state.phenomena.filter(i => i !== item);
            else state.phenomena.push(item);
            renderPhenomenaGroups();
            updateDynamicInputs();
        }

        function updatePhenStyle(p, val) {
            state.phenomenaStyles[p] = val;
        }

        function notify(text) {
            const el = document.getElementById('notification');
            document.getElementById('notification-text').innerText = text;
            el.style.opacity = '1';
            setTimeout(() => el.style.opacity = '0', 2500);
        }

        // --- Core Logic: Prompt Generation ---
        function generatePrompt() {
            // Update state from inputs
            state.domain = document.getElementById('domain').value;
            state.level = document.getElementById('level').value;
            state.goal = document.getElementById('goal').value;
            state.coreInfo = document.getElementById('coreInfo').value;
            state.view = document.getElementById('view').value;
            state.hierarchy = document.getElementById('hierarchy').value;
            state.matCatalyst = document.getElementById('matCatalyst').value;
            state.matMembrane = document.getElementById('matMembrane').value;
            state.labels = document.getElementById('labels').value;

            // Context construction
            const viewDesc = state.view.includes('2D') ? `${state.view} (orthogonal projection emphasizing flat profile)` : state.view;
            const styleLines = state.phenomena.map(p => `- ${p}: ${state.phenomenaStyles[p] || 'Standard scientific notation'}`).join('\n');
            
            const purposeCtx = state.purpose.map(p => {
                if (p === 'Power Point') return "Optimize for high contrast and bold features for large screen readability.";
                if (p === 'Graphical Abstract') return "Ensure rapid comprehension with a single high-impact central mechanism.";
                if (p === 'Journal Cover') return "Apply professional dramatic lighting and high artistic depth.";
                if (p === 'Illustration') return "Balance aesthetic harmony with rigorous scientific fidelity.";
                return "Focus on technical accuracy and peer-review logical flow.";
            }).join('\n- ');

            const prompt = `
# Scientific Illustration Specification: ${state.domain}

[KNOWLEDGE INTEGRATION & EXPERT REASONING]
- Role: Act as an expert scientific illustrator specialized in ${state.domain}.
- Background Knowledge: Activate databases for ${state.level} models. Ensure physical notations conform to established academic visual conventions for ${state.domain}.
- Logical Synthesis: Fill in missing structural details based on recognized scientific models and peer-reviewed standards.

[ILLUSTRATION PURPOSE & AUDIENCE]
- Primary Target: ${state.purpose.join(', ')}
- Usage Context: ${purposeCtx}

[SCIENTIFIC CONTEXT]
Research Domain: ${state.domain}
Research Level: ${state.level}
Primary Goal: ${state.goal}

[OBJECTIVE & COMPOSITION]
Core Scientific Information: ${state.coreInfo}
Visual Layout: ${viewDesc} with professional perspective.
Structural Hierarchy: ${state.hierarchy}.
Cross-section: Enabled.

[PHYSICAL PHENOMENA & ENTITIES]
Visualizing: ${state.phenomena.join(', ')}.
Causal Consistency: Ensure logical correspondence between phenomena (e.g., flow direction matches concentration gradients).

[MATERIAL & TEXTURE]
- Core Catalyst/Active Surface: ${state.matCatalyst}
- Environment/Matrix: ${state.matMembrane}
${styleLines}
Constraint: Matte finish, strictly no harsh reflections, soft scientific ambient occlusion.

[VISUAL STYLE & ANNOTATIONS]
Overall Style: Nature journal scientific illustration style.
Background: Clean white background.
Mandatory Labels: ${state.labels}.
Technical Constraints: High resolution, professional sans-serif typography, no cartoonish effects, no artistic lens flares.
            `.trim();

            const display = document.getElementById('prompt-text');
            display.innerText = prompt;
            display.classList.remove('hidden');
            document.getElementById('empty-state').classList.add('hidden');
            document.getElementById('copy-btn').disabled = false;
        }

        function copyToClipboard() {
            const text = document.getElementById('prompt-text').innerText;
            const textarea = document.createElement('textarea');
            textarea.value = text;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);
            
            const btnText = document.getElementById('copy-text');
            btnText.innerText = "Copied!";
            setTimeout(() => btnText.innerText = "Copy Prompt", 2000);
            notify("Prompt copied to clipboard!");
        }
    </script>
</body>
</html>